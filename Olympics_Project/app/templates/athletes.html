{% extends "base.html" %}

{% block title %}Olympia Manager — Archivio Atleti{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <span class="section-label">L'Archivio</span>
        <h1>Database Atleti</h1>
        <p>Cerca tra migliaia di atleti che hanno fatto la storia dei Giochi Olimpici.</p>
    </div>
</div>

<section class="section" style="padding-top: 0;">
    <div class="container">

        <form method="GET" action="/athletes" class="search-bar-wrapper">
            <i class="fas fa-search search-bar-icon"></i>
            <input type="text" class="search-bar" name="q" placeholder="Cerca per nome, sport, nazione..." value="{{ request.args.get('q', '') }}">
            <button type="submit" style="display: none;">Cerca</button>
        </form>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
            <p style="margin: 0; color: var(--text-muted); font-size: 0.9rem;">
                <strong style="color: var(--text-main);">{{ athletes|length }}</strong> risultati mostrati
            </p>
            <a href="/add_athlete" class="btn-olympia btn-primary-olympia btn-sm">
                <i class="fas fa-plus"></i> Nuovo Atleta
            </a>
        </div>

        <div class="table-olympia-wrapper">
            <table class="table-olympia" id="athletesTable">
                <thead>
                    <tr>
                        <th>Atleta</th>
                        <th>Sesso</th>
                        <th>Età</th>
                        <th>Nazione</th>
                        <th>Sport</th>
                        <th>Edizione</th>
                        <th>Medaglia</th>
                    </tr>
                </thead>
                <tbody>
                    {% for a in athletes %}
                    <tr>
                        <td><strong>{{ a.name }}</strong></td>
                        <td>{{ a.sex }}</td>
                        <td>{{ a.age if a.age else '-' }}</td>
                        <td>{{ a.team }}</td>
                        <td>{{ a.sport }}</td>
                        <td>{{ a.games }}</td>
                        <td>
                            {% if a.medal == 'Gold' %}
                                <span class="medal-badge medal-gold"><i class="fas fa-medal"></i> Oro</span>
                            {% elif a.medal == 'Silver' %}
                                <span class="medal-badge medal-silver"><i class="fas fa-medal"></i> Argento</span>
                            {% elif a.medal == 'Bronze' %}
                                <span class="medal-badge medal-bronze"><i class="fas fa-medal"></i> Bronzo</span>
                            {% else %}
                                <span class="medal-badge medal-na">N/A</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="7" style="text-align: center;">Nessun atleta trovato per questa ricerca.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</section>
{% endblock %}